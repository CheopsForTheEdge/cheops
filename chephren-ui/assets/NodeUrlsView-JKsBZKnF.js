import{d as C,h as _,a as h,b as t,t as N,F as L,T as u,o as i,_ as E,p as B,f,q as D,w as b,u as S,j as M,e as g,k,g as I,s as j,v as A,x as J,y as q,z}from"./index-S3zfWH4n.js";import{B as V}from"./ButtonComponent-Pwr4QGq4.js";import{u as P,N as K,L as G}from"./nodesUrl.store-PXBot1Sw.js";import{M as H}from"./ModalComponent-9h5liNC-.js";import{S as Q}from"./SearchInput-IoF5Gwl3.js";import{T as x}from"./TextInput-l54gc_wS.js";const W=["accept"],X={for:"file"},Y=C({__name:"InputFile",props:{label:{type:String,required:!0},accept:{type:String,default:""}},emits:["fileSelected"],setup(c,{emit:p}){const n=p,o=_(),s=r=>{const m=r.target.files;if(m.length===0){o.value=void 0,u.addDev("No file selected");return}o.value=m[0],n("fileSelected",o.value)};return(r,d)=>(i(),h(L,null,[t("input",{type:"file",name:"file",id:"file",accept:c.accept,onChange:s},null,40,W),t("label",X,N(o.value?o.value.name:c.label),1)],64))}}),Z=E(Y,[["__scopeId","data-v-190f26ff"]]);var ee={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const v=c=>(q("data-v-db24fe4e"),c=c(),z(),c),te={class:"page"},le=v(()=>t("h1",null,"View and register node urls",-1)),ae={class:"add-zone"},oe={class:"import-export-zone"},ne=["path"],se=v(()=>t("div",{class:"separator"},null,-1)),re={key:0,class:"url-table"},de=v(()=>t("thead",null,[t("tr",null,[t("th",null,"Url"),t("th",null,"Name"),t("th",null,"Actions")])],-1)),ue=["onClick"],ie=["path"],ce={key:0,class:"no-data"},pe={colspan:"3"},me=["path"],ve=v(()=>t("p",null,"The format of the JSON file is an array of objects with the following properties:",-1)),fe=v(()=>t("ul",null,[t("li",null,"url: string"),t("li",null,"name: string")],-1)),_e=v(()=>t("p",null,"Example:",-1)),he=v(()=>t("pre",null,[t("code",null,`[
  {
    "name": "Marie",
    "url": "http://localhost:3000"
  },
  {
    "name": "Maurice",
    "url": "http://localhost:3001"
  }
]`)],-1)),Ue=C({__name:"NodeUrlsView",setup(c){const p=P(),n=_();let o=[];const s=_(""),r=_(""),d=_(!0),m=_(!1),y=a=>{if(!a){n.value=o;return}a=a.toLowerCase().trim(),n.value=o==null?void 0:o.filter(e=>e.contain(a))},w=()=>{var U;if(d.value=!1,!s.value){u.addError("Invalid url","Url cannot be empty"),d.value=!0;return}if(!r.value){u.addError("Invalid url","Name cannot be empty"),d.value=!0;return}const a=URL.canParse(s.value)?new URL(s.value):new URL(`${ee.VITE_DEFAULT_PROTOCOL}://${s.value}`),e=new K(a,r.value);if((U=n.value)!=null&&U.find(T=>T.equals(e))){u.addError("Invalid url",`Url already exists (${s.value})`),d.value=!0;return}const l=p.addNodeUrl(e);u.addSuccess("Url added",`Url has been added (${s.value})`),n.value=l,o=l,s.value="",r.value="",d.value=!0},O=a=>{const e=p.deleteNodeUrl(a);u.addSuccess("Url deleted",`Url has been deleted (${a})`),n.value=e,o=e},$=()=>{var a,e;return!d.value||!((a=s.value)!=null&&a.trim())||!((e=r.value)!=null&&e.trim())},F=a=>{p.importNodeUrls(a).then(e=>{u.addSuccess("Urls imported","Urls has been imported"),n.value=e,o=e}).catch(e=>{u.addError("Unable to import",e.message)})},R=()=>{const a=p.exportNodeUrls(),e=URL.createObjectURL(a),l=document.createElement("a");l.href=e,l.download="urls.json",l.click(),URL.revokeObjectURL(e)};return B(()=>{const a=p.getNodeUrls();n.value=a,o=a}),(a,e)=>(i(),h("div",te,[le,t("div",ae,[f(x,{label:"Name",modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=l=>r.value=l)},null,8,["modelValue"]),f(x,{label:"New url",modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=l=>s.value=l),onKeyup:D(w,["enter"])},null,8,["modelValue"]),f(V,{disabled:$(),onClick:w},{default:b(()=>[g(" Add ")]),_:1},8,["disabled"])]),t("div",oe,[f(V,{onClick:R},{default:b(()=>[g("Export urls to JSON")]),_:1}),t("div",null,[f(Z,{label:"Import urls from JSON",accept:"application/json",onFileSelected:e[2]||(e[2]=l=>F(l))}),t("button",{class:"info",onClick:e[3]||(e[3]=l=>m.value=!m.value)},[t("svg-icon",{path:S(j),type:"mdi"},null,8,ne)])])]),se,f(Q,{label:"Search url",onInput:e[4]||(e[4]=l=>y(l)),onClear:e[5]||(e[5]=l=>y("")),class:"search-input"}),n.value?(i(),h("div",re,[t("table",null,[de,t("tbody",null,[(i(!0),h(L,null,M(n.value,l=>(i(),h("tr",{key:l.hash},[t("td",null,N(l.url),1),t("td",null,N(l.name),1),t("td",null,[t("button",{onClick:U=>O(l)},[t("svg-icon",{path:S(A),type:"mdi"},null,8,ie)],8,ue)])]))),128)),n.value.length===0?(i(),h("tr",ce,[t("td",pe,[t("div",null,[g("No data "),t("svg-icon",{path:S(J),type:"mdi"},null,8,me)])])])):k("",!0)])])])):(i(),I(G,{key:1,label:"Loading Urls"})),m.value?(i(),I(H,{key:2,class:"modal",showCancelButton:!1,onCloseModal:e[6]||(e[6]=l=>m.value=!1),headerText:"Format"},{default:b(()=>[ve,fe,_e,he]),_:1})):k("",!0)]))}}),ke=E(Ue,[["__scopeId","data-v-db24fe4e"]]);export{ke as default};
